#include "GameManager.h"

GameManager::GameManager()
{
    curGameStage = 0;
    lastGameStage = 10;
    curBattleStage = 0;
    lastBattleStage = 10;
}

GameManager* GameManager::getInstance()
{
    // 인스턴스가 nullptr일 경우에만 새로 생성
    if (instance == nullptr)
    {
        instance = new GameManager();
    }
    return instance;
}

//시작 화면
void GameManager::StartScreen()
{

    std::cout << R"(
                                .!.....,-,..:~    
              .:!!:;;*-         !--,~;!!;!!!.*    
            ,;:,     .;;    ~:  !-,;!.      !*    
          .!~   . ,~:;;::;;;.,!~:;-!        ,.    
        .!~    -;:.      .!    :-:!;.             
       ;~   .-:.     -~::!    .~~,.,:!:           
    .!;.  .-:  .  .!!~. ;    .;;!,;.~;!!!,        
 .:!:....,:- .  .~,,,-:!.    .-~ ~~~.    ::       
!!, ....:; ....      ..!     .;  ;;:.     !*.,:~-.
......,;-...-,.....-~.,!..,~;:,;;-..     -~.~-,,-~
!.,,,-;,..-~.....-:.  .-;:~, ....;       ;:....  .
!-,,:; ..:-.....-;.   ...   .....;-     ~:.:-...  
:-,~; ..;~......;..       .......,;.   -;:~ :~... 
 !~; ..~!......;,.................,;,.~;..,!.:-...
 ,* ...!.......;,,,,,,,,,...........;;~ ....:,:...
  ;-..!,.....,-;,,,,,,,,,,,,,................:-;,.
   ;.,!...,,,,~;:!!!:,~,,,,,,,,,....~.........:;,:
   !.-;..,,,,,!*~,,,~!:,,,-,,,,,,,,.:........  ;-,
   !-;:~:;-,-!~!;::;;!:-,------,,,,~~.......   -..
,  !:     !:;..!,,,,,-;,,,------,,,:~,...... . ,,.
!-~~       ;.~!:~,,,,,;,,,,,,,---,,;-,,..... ...~.
!!!        -,;!!:-,,,,:~,,,,,,,,,--!~,,,.... .. ;.
!!.         !!!;!!!~,,,!,,,,,,,,,,-~;,,,,... .. ;.
!;          :;;!!!!*;~~!;.,,,,,,,,~~*!;-,,......!,
!:          .!:--!*!*,-,::,,,,,,,,~!:,-;~,,.....;,
!-             :;;,!!:...:!,,,,,,,--,*;,;,,,....!,
!.            ;;~~!,*;  ..-*;,...,,;.:-!~:,,....!,
*            ;:---~!-!    ..~;!!;!;:-,:-;;-,,...:,
*            ;-----!,       ....,!*- :;--:,,,..-~,
;           ,-.,---;~         :*!!!!!~.;~,,,,...:,
!           ~,...- --        ;;;!!!!!!*~;:,,,,..;,
;           ;..... :.        ;~,..-::!!!;~!,,,...;
;           :,.....;              :;-.*!!-.;!-~-~~
;           -,   .:~            ~!--:!,*!!..---,,.
!            ;.  -;            ~!-----!,**..--,...
!            .;!;=             *------:,!*- :-....
*                             ~:..,----~:*~ !-....
*                             :-..... .-:*,-:.....
*.                ~   ,       ;,..... ,--; *......
*~                .!:;;;;:    -~.   ..*   ~-......
!*                  ;::~:;~    *~!;:~:-  ,:.......
**.                 !:    ~     ,       ~;........
*!;                 :     ;          .-!~......,..
*!*:                ,;   ,~         :~-.......;,..
*!!*.                -;--:           ~;,.~;~~;;-,.
!!!!!-                 ,               -!- -;;.~;;
!!!!!*:                                :.        -
**!**!**,                             .:          
!*!**!!!*!;-...             .      .,,~, ,,.     ,
*!**!!!*!!*****!::~~::;;;!!****!!!!*!!;!-:!;~,,,-:
)" << std::endl;

    MoveCursor::getInstance()->GotoXY(50, 0); std::cout << "■■■■■■■■■■■■■■■■■■■■■■■" << std::endl;

    MoveCursor::getInstance()->GotoXY(60, 4); std::cout << " ★트릭컬 버터 키우기★" << std::endl;

    MoveCursor::getInstance()->GotoXY(50, 9); std::cout << "■■■■■■■■■■■■■■■■■■■■■■■" << std::endl;
    MoveCursor::getInstance()->GotoXY(65, 10); std::cout << "♪ 버터 TMI ♪" << std::endl;
    MoveCursor::getInstance()->GotoXY(50, 12); std::cout << "종족: 수인♣";
    MoveCursor::getInstance()->GotoXY(50, 14); std::cout << "♥ 버터가 좋아하는 것 ♥" << std::endl;
    MoveCursor::getInstance()->GotoXY(50, 16); std::cout << "♥ 새 친구 사귀기" << std::endl;
    MoveCursor::getInstance()->GotoXY(50, 17); std::cout << "♥ 누군가 자신과 놀아주는 것" << std::endl;
    MoveCursor::getInstance()->GotoXY(50, 18); std::cout << "♥ 부드러운 과자" << std::endl;
    MoveCursor::getInstance()->GotoXY(50, 19); std::cout << "♥ 누군가 자신의 머리를 쓰다듬어 주는 것" << std::endl;
    MoveCursor::getInstance()->GotoXY(50, 21); std::cout << "※ 싫어하는 것 ※" << std::endl;
    MoveCursor::getInstance()->GotoXY(50, 23); std::cout << "※ 자신의 꼬리" << std::endl;
    MoveCursor::getInstance()->GotoXY(50, 24); std::cout << "※ 귤" << std::endl;
    MoveCursor::getInstance()->GotoXY(50, 25); std::cout << "※ 누군가 자신의 옐로카드를 꺼내는 것" << std::endl;
    MoveCursor::getInstance()->GotoXY(50, 27); std::cout << "『취미』 " << std::endl;
    MoveCursor::getInstance()->GotoXY(50, 29); std::cout << "『코미와 같이 놀기』" << std::endl;
    MoveCursor::getInstance()->GotoXY(50, 30); std::cout << "『간식을 땅에 묻어두기』" << std::endl;
    MoveCursor::getInstance()->GotoXY(50, 32); std::cout << "■■■■■■■■■■■■■■■■■■■■■■■" << std::endl;

    MoveCursor::getInstance()->GotoXY(66, 38); std::cout << "▶ 게임 시작 (1) ◀" << std::endl;
    MoveCursor::getInstance()->GotoXY(65, 42); std::cout << "▶ 게임 종료 (2) ◀" << std::endl;
    MoveCursor::getInstance()->GotoXY(50, 47); std::cout << "■■■■■■■■■■■■■■■■■■■■■■■" << std::endl;
}

void GameManager::GrowthInterface()
{
    std::cout << R"(

  ..           ,.                                 
,~,.          ,,-,                                
:            .-  ~.                ,,,.           
~:~.       -!;:,.,.               -,...           
,;:,     ,:!:;;!,..     ..,-, .  .~..,,,.         
!;:~.   ,;;- ~;:....,-,,.,.   .,~~-.,-,,--        
;-  .  .!;,  -;,.,,--.,,,,   .  ..,.,.    .       
-,     ;;.  ,-.--,.---,..    .. .      .          
 :   .-,   -~,-,..,.. ...    ,  ,.     ,.         
,:-      .~--.-........,. .,--.,      ..  .      .
~ ,~---~-~,-.-..........,,,...-,,    .. .  ,-.    
. ,.~. .,.-.-...................-,  .... . ..     
,:!;-  -.-.,.....-,..............,--,.... .       
-;,;;-,.-......,..,,..,...................,.      
  -,;..- .....-----,,,-.,,,,,,..............      
 ,.;,.,. .......,.-,,,-.,,,,,,,--,-........ ..    
 -- -.- .,,.,.,,, .-,,,,,,,,,,,-,,.-,......... .. 
 ,  .-...,.,,,-,.. .,--~,,,,,,,,,,-,-,.......,....
.~-.,-....--:~....,.   .-,,,,,,,,,-~:-.......,. ..
 ~- -,....-.:~~~~--     ..--,--~~,~,,,.......-...,
.-. ,,....: ~~,. ,-~       ...  ..--,,,.....,-....
:,  .,...-,-:.   ~--~       .~-,~-.:,,,,....-,...,
     -...: ~   ,;~~-.       .~~~:;:,:-,,,...-,,.,,
     .-..;    -~---:       .-.  ..::~~~-,,...~~,,-
     .-,.~   ,~,,. ~          .... :;..~~~:::~,,,,
    ,. .,,   :.... -         ~~~~~, ;~  .~--,,,,,,
   ..       .~.  .-.        ~-----:.-:  .~,,,,,,,,
   ,         ~::;~:        --.,,--~..~  .-,,,,,,,,
   .                       :...., ,. -  ---,,,,,,,
~  .               -      .~..... -.   ,~,,,,,,-,,
-. ,              ,!*~,..  ~~. ...~   .:,,,,,,,~,,
.- ,.             .!!!~~-   .,:..,~  ,:,,,,,,,--,,
.~. -             .!~  ,.,    .:~: .-:,,,,,,,~-,,,
.,: .,             ~     -      .  ,:-,,,,-:~-,,,,
.,-, ,-            ,.    -          ,:::::~,,,,,,,
.,,:  ,~            -,  ,.          ~,,.,,,,,,,,,,
.,,,:  .:,           ,--.          ~....,,,,,,,,,,
.,,,:, .-,~.                      -,...,,,,,,,,,-,
,.,,::.,. .~-.                    ~...,,,,,,,,,,:,
~.,,:,~~  ,..-~~.                ~...,,,,,,,,,,:,,
;-,,~,,~  .---~!!~,--           .,..,,,,,,,,,,~-,,
:-~::-,, .-.-~,;!-~:.~~-,,.     .,.,,,,,,,,,,~~,,,
:----.-..,   ~-;;;-: ~:;;;:~:;;;:,.,,,,,,,,,~-,,,,
~----~. ~     ;:;-~,,:,,,,::~,,,~,,,,,,,,,-~-,,,,,
,----~~~      .:;.-::-.,~-,.~-,,~,,,,,,,,,,-,,,,,,
,------,     .-:;,---~~-,,,,~~,,~-,,,,,,,,--,,,,,,
.~-----      , :;~. .,--,.-~ .:--:-,,,,,,,--,,,,,,
;!:---::-..,-. :;:,.    ~-- ..-::;:,,,,,,--:,,,,,,
:::;~~,.--~--~,:;!.     ~-   .-,. .:-,,,,:,~~,,,,,
::::~: ,     ..-;;.    ,~     :..  .~-,,,::::-,,,,

)" << std::endl;
    MoveCursor::getInstance()->GotoXY(50, 0); std::cout << "■■■■■■■■■■■■■■■■■■■■■■■" << std::endl;

    MoveCursor::getInstance()->GotoXY(60, 1); std::cout << " ★트릭컬 버터 키우기★" << std::endl;
    MoveCursor::getInstance()->GotoXY(50, 4); RandomDialog();

    MoveCursor::getInstance()->GotoXY(50, 9); std::cout << "■■■■■■■■■■■■■■■■■■■■■■■" << std::endl;

    myplayer.CharacterInfo();   //캐릭터 스텟 출력

    MoveCursor::getInstance()->GotoXY(50, 32); std::cout << "■■■■■■■■■■■■■■■■■■■■■■■" << std::endl;
    
    MoveCursor::getInstance()->GotoXY(50, 47); std::cout << "■■■■■■■■■■■■■■■■■■■■■■■" << std::endl;
}

void GameManager::SelectGrowEvent()
{
    //1, 2, 3 선택 질문 작성
    int selectEvent = 0;
    while (myplayer.GetCurCost() > 0)
    {
        MoveCursor::getInstance()->GotoXY(50, 35); std::cout << "1. 어떤 성장을 하게될까?";
        MoveCursor::getInstance()->GotoXY(50, 38); std::cout << "2. 누르면 어떻게 될지 궁금하지?!";
        MoveCursor::getInstance()->GotoXY(50, 41); std::cout << "3. 누르면 백만장자도 될 수 있어?!";
        MoveCursor::getInstance()->GotoXY(50, 44); std::cout << "4. 회복약 구매!";
        
        MoveCursor::getInstance()->GotoXY(50, 46); std::cout << "행동을 선택해!!: "; std::cin >> selectEvent;

        switch (selectEvent)
        {
        case 1:
            system("cls");
            GrowthInterface();
            //Cost 차감
            myplayer.usedCurCost();
            randomEvent.eventSet(); //랜덤 이벤트 출력
            Sleep(300);    //0.3초대기
            system("cls");
            GrowthInterface();


            break;
        case 2:
            system("cls");
            GrowthInterface();
            randomEvent.eventSet(); //랜덤 이벤트 출력
            //Cost 차감
            myplayer.usedCurCost();
            Sleep(300);    //0.3초대기
            system("cls");
            GrowthInterface();

            break;
        case 3:
            system("cls");
            GrowthInterface();
            randomEvent.eventSet(); //랜덤 이벤트 출력
            //Cost 차감
            myplayer.usedCurCost();
            Sleep(300);    //0.3초대기
            system("cls");
            GrowthInterface();

            break;
        case 4:
            system("cls");
            GrowthInterface();
            MoveCursor::getInstance()->GotoXY(50, 44);
            myplayer.setUsedGold(200);
            Sleep(300);    //0.3초대기
            system("cls");
            GrowthInterface();
        default:
            std::cout << "유효하지 않은 선택입니다.\n";
            Sleep(200);    //0.5초대기
            system("cls");
            GrowthInterface();
            break;
        }
    }
    // Cost가 0일 때 처리
    system("cls");
    GrowthInterface();
    SetCurGameStage();  //성장 스테이지 ++
    MoveCursor::getInstance()->GotoXY(65, 39); std::cout << "줘팸터로 이동중";
    Sleep(3000);    //3초 대기
 
}

//전투화면
void GameManager::BattleInterface()
{
    system("cls");
    std::cout << "전투화면 출력" << std::endl;

    while (true)
    {
        myplayer.CharacterBattleInfo();
        newEnemy.CharacterInfo();

        // 전투 선택
        BattleSelect();

        // 플레이어와 적의 HP 확인
        if (myplayer.getCurHp() <= 0)
        {
            std::cout << "패배! 반성문 써오세요!" << std::endl;
            Sleep(1500);
            break;
        }
        else if (newEnemy.getCurHp() <= 0)
        {
            std::cout << "승리! 다음 스테이지로 이동합니다!" << std::endl;
            break;  // 전투 루프 종료
        }
    }

    // 전투 종료 후 성장 화면으로 이동
    if (newEnemy.getCurHp() <= 0) // 적이 사망했을 때만 성장 화면으로 복귀
    {
        SetCurGameStage();  // 스테이지 증가
        // 성장, 전투 Cost 초기화
        myplayer.initCurCost();
        myplayer.InitCurBattleCost();
        myplayer.setGold(newEnemy.getGold());

        newEnemy.EnemyUpgrade();

        GrowthInterface(); // 성장 화면으로 복귀
    }
    else if (myplayer.getCurHp() <= 0)    //플레이어 패배 시 
    {

    }
}

// 전투 행동 선택
void GameManager::BattleSelect()
{
    int battleSelect;
    MoveCursor::getInstance()->GotoXY(0, 41);
    std::cout << "■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■";
    MoveCursor::getInstance()->GotoXY(0, 42);
    std::cout << "1. 공격(Battle Cost 1 소모)■";
    MoveCursor::getInstance()->GotoXY(30, 42);
    std::cout << "2. 쉴드 획득(Battle Cost 1 소모)  ■";
    MoveCursor::getInstance()->GotoXY(65, 42);
    std::cout << "3. 스킬(Battle Cost 5 소모 + MaxMana)";
    MoveCursor::getInstance()->GotoXY(0, 43);
    std::cout << "■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■";

    MoveCursor::getInstance()->GotoXY(0, 47);
    std::cout << "■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■";

    MoveCursor::getInstance()->GotoXY(0, 45);
    std::cout << "전투행동 선택: ";
    std::cin >> battleSelect;

    switch (battleSelect)
    {
    case 1:
        myplayer.attack(newEnemy);
        myplayer.UsedBattleCost();
        myplayer.SetMana(); // 공격 시 마나 5회복
        break;
    case 2:
        std::cout << "쉴드를 획득했습니다." << std::endl;
        myplayer.UsedBattleCost();
        myplayer.setCurShield(myplayer.getAddShield());
        Sleep(500);
        break;
    case 3:
        if (myplayer.getCurBattleCost() == myplayer.GetBattleCost() && myplayer.GetMana() == myplayer.GetMaxMana())
        {
            std::cout << "버터플라이! 스킬을 사용하였습니다!";
            myplayer.UsedMana();
            myplayer.UsedSkillCost();
            myplayer.SkillAttack(newEnemy);
            Sleep(500);
        }
        else
        {
            std::cout << "마나 또는 Cost가 부족합니다." << std::endl;
        }
        break;
    default:
        std::cout << "다시 입력하세요" << std::endl;
        Sleep(500);
        system("cls");
        BattleSelect();
        return; // 여기서 리턴하여 BattleInterface()를 재귀 호출하지 않음
    }

    // 턴이 종료되어 BattleCost 회복
    if (myplayer.getCurBattleCost() == 0)
    {
        // 적의 행동
        newEnemy.attack(myplayer);
        myplayer.InitCurBattleCost();
    }

    Sleep(1500);
    system("cls");
}




void GameManager::RandomDialog()
{
    // 랜덤 대사를 저장할 벡터
    std::vector<std::string> dialogs = {
        "꾜주님 친구들 너무 좋아요!",
        "꾜주님 반가워요! 제가 판 구덩이만 건들지 마세요!",
        "꾜주님!! 산책 가는 거에요? 빨리 가요! 빨리!",
    };

    // 랜덤 시드 초기화
    std::srand(static_cast<unsigned int>(std::time(nullptr)));

    // 무작위 인덱스 선택
    int randomIndex = std::rand() % dialogs.size();

    // 선택된 대사 출력
    std::cout << dialogs[randomIndex] << std::endl;
}

void GameManager::GameExit()
{
    exit(0);
}

void GameManager::GameMenuSelect()
{
    int select = 0;
    std::cin >> select;

    switch (select) {
    case 1:
        std::cout << "게임 시작" << std::endl;
        break;

    case 2:
        GameExit();
        break;
    default:

        std::cout << "잘못된 입력입니다. 다시 선택하세요." << std::endl;

        Sleep(500);    //0.5초대기
        system("cls");
        StartScreen();
        GameMenuSelect();    //재귀함수
    }
}

void GameManager::Prologue()
{
    system("mode con: cols=150 lines=150");
    std::cout << R"(

~~~----~~~~-----~~~~~~~~~~~~~~~~~~~~~~~~~~--~~~~~~-~~,:,... ,. ,:;~,:,-~~~~~~~~~~-~~---~~--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
--------~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-~~~~~~~~~.:~:, ..     ,-:.:~~~~~~~~~~~~~~----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
---~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-~~~~~~~~~~-.~, .;:-,      ,,-:~~~~~~~~~~~~~~----~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~--~-~~~~~~~~,~~    .-~~-    :.:~~~~~~~~~~~~~~~-~--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-~~~~~~~~~~~~--------~.;         :!;, ;-:--~-~~~~-----------~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-------------,            ~!-~~------~---------~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~---~----------------------~~.~.     ,.     .!.:--------~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~-----------------------,,-,,-, :      ,~     --.:,-,-------------~-~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~--~~------------,,,,,,,,,,,,,,,,, :     ..;-.  .--,~,,,,------------------~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
---~~~~~~~~~~-~-~~~~------------,,,,,,,,,,,,,,,,,, : .....-:-:-:~~,-~,,,,,,----------------~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
---~~~~~~~~~-~~~~~~~------,,,,,,,,,,,,,,,,,,,,,,,, : ,~::;~  ., ~;.~-,,,,,,,,,,,,,,,--------~-~~-~~~~~~~~~~~~~~~~~~~~~~~
---~~~~~~~---~~~-----------,,,,,,,,,,,,,,,,,,,,,,, :            .~-:-,,,,,,,,,,,,,,,,,,,----~~~~-~~~~~~~~~~~~~~-----~~~~
~~~-----------------------,,,,,,,,,,,,,,,-,,,,,,,,.-,           .;,~-,,,,,,,,,,,,,--------------------~~~~~~~~~~-~~~~~~~
~~-------------------,---,,,,,,,,,,,,,~:::::-~::~-,,:          .,:,~,,,,,,,,,,,,,,,,,,,,---------------~~~~~~~~~~~~~~~~~
~~------------------,,,,,,,,,,,,,,,,,,,~~-,,,,,,,~:--~~~~,. ....;,~--~~~~~~-,,,,,,,,,,,,----------------------~~~~~~~~~~
------,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, ;!-,-!:;**!~ ::-    !:,-;-;~,~~~,..-~:::~,,,,,,,,,,,,,,,,,,,,,,,,--------~~~~~~~~~~
--------,,,,,,,,,,,,,,,,,,,,,,,,,,..;~...-::-,.,::,-:~-,,.,:-.~,.,-,-~:~~~-,-~:~~~~~~~,,,,,,,,,,,,,,,,----------------~~
-----,,,,,,,,,,,,,,,,,,,,,,,,,,,,, ;-....,,......,!,-:~,,,,,,,,,,.;!~-,,,--;~.......~:~,,,,,,,,,,,,,,,,,----------------
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.!-..,.........,,,;--:~-,,,,,-.,;~,........:~-;;;;~,,~:-,,,,,,,,,,,,,,,,---------------
,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, :-.,,,..........~,,;~.::~~-~-.~:,.........,,:-,..,,~;.::-,,,,,,,,,,,,,,,,,,,,,,,---,---
,,,,,,,,,,,,,,,,,,,,,,,,------~,-~.,,,,,.......,,-;,.:~.,~~~,.:~.,~.........,,.......,: ~:,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,~,,,,,,,:-..,,.~,... ..::~~!;,.-~~:~:~~-.~;;:-.................-:.:~,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,..~:-~~!;,...,,,;......-!!!:.-!-:-~~-~:,~!~..,:!-,......,........~~-:~--,,,,,,,,,,,,,,,,,,,,,,,,,-
,,,,,,,,,,,,,,,,,,,,,,::-----........:-.......,,,-:~,:,-;-~,,:-~~-~~~;!-....,,,,........:,,,~::~~-,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,-............,;-......,,,-,---!;. ~*~ .;!-,.....,;....,,,,........,~*:   ,:~-,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,--.........,:~:-......,,,-,-~:-,~:~:.~~~~,,,-,,,.......,,,...........,-:::~,:~,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,--.........,:,........,,---~;;,----,,,,-,,--:-,,,.......,.................-~,:-,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,~..........~;~,.....,,--~:: !------,,------:;-,,,.........................;.~~,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,.~:.......,,,-;,....,-:;~..- *----------,---:~;--,,........................,:-:,,,,,,,,,,,,,,,,,-,,
,,,,,,,,,,,,,,,,,,,,,,.:~,,,,,,,--:~,....,:~.;,~-:,:-,--,----,-,-;.::--,,........................;-:,,,,,,,,,,,,,-,,,---
,,,,,,,,,,,,,,,,,,,,,,,.-!~-,,--,;~,,...,:~ -****!::--;;~,,---;~-;-~--;;:,.....--...............,;-~,,,,,,,,,,,,,--,,---
--,,,,,,,,,,,,,,,,,,,,,,. :!;:~:=:......,* ~!-.  ~**!:- :!:---===*:.    ~-.....,!~..............,:--,,,,,,,,,,,,,,,,,,-,
---,,,,,,,,,,,,,,,,,,,,,,,..,,;:-..,-~,.~,.:~~~-~, -.,.   --:*!;~~;!:   --......,;:............,;,-,,,,,,,,,,,,,,,,,,,,,
---,,,,,,,,,,,,,,,,,,,,,,,-..!-...,!~--.~, --  . -:         --     .!;  .~.......,;!,.........,!,.,,,,,,,,,,,,,,,,,,,,,,
-,,,,,,,,,,,,,,,,,,,,,,,,,,~:,...-:   -~:! :      :.           .~~-~.:-  ;........,-;:~-,,--~::,.,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,.,;,....,:      . .-      .~          !;.  -,.-  ;........,,--~:!!!:..,-,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,.-:,.....--         ;.     ~,         ~,    .:.   ;,~.......,,,,,,--:~,-:~,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,.,:,,.....;.        .:.    -:          :      ,~   ;;;.........,,,,--,-; -:-,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,;,..,....!.        ,,.::::,           :      ~-   .--...........,,,,,,,;.~~,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,.;-,.......;.         --.        ..     ,;-.,:~ ;. ,:~.,,................,~.:-,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,--,.;,,,,,,,..--                    ,;,      -:~.-,;~;;,...,.................~.:~----,-,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,--,,,,~,,.,,,,,.,~                     :~          ,!:-......,,................~.:-,---,-----,,,,,,,,,,,
,,,,,,,,,,,,,--,,,,,,,:,,.,,--,,.:.                     !         .;-........,........,..,,....~.::~,,,,,--,--,,,,,,,,,,
,,,,,,,,,,,,-,,,,,,,, ;-,...~--,,-:.                             .~,.................,~,,---,,,:-,,:~--,,,,,,,-,,,,,,,,,
,,,,,,,,,,--,,,,,,,,.-~!-,..:--,,,,:.                            ~,..............,..,~~--------!~;; ~:::,,,,,,,,,-,,,,,,
,,,,,,,,,,--,,,,,,..-:.,:~-,~!~-,,-:;,                           :...............-,,:*~--~~~~:;,..~;--,-~,,,,,,,,,,,,,,,
,,,,,,,,,,,,-,,,,. ;-,..,,,-:;~;!;-,-~;~.!;;;;:,                 :.....,-:;;;:,~!;!!~--!:--~;-,....,--;.:-,,,,,,,,,,,-,,
,,,,,,,,-,,,,,,,,.*~,,,,,........,.....~;-. ...~;.               ~,..-:;~,...-:~..~..................,:.~,,,,,,,,,,,,--,
,,,,,,,--,,,,,,,,.!;~--,-,,.,.,.,........... . ..--:~ -;:::- -:;:-;,,!. .   ...................,,,,,-;~ ,,,,,,,,,,,,,,,,
,,,,,,---,,,----,, .~::;~~~~~--,,,,,................-:,....-!-..,:-:!!...........,,,,,,,,.....,~;:~;; .,,,,,,,,,,------,
,,,,,,,----------,,,....--~---~!::;-,,......................-,.......-........,,,,,--,,,,,,,,,-;-,,..,,,,------------,,,
,,,,,,,,-~-----,,,,,,,,,,....,  ,,,!:,.....................................,,,,,,-------------::,,,,,,,,,,,-------,,,,,,
,,,,,,,,,,,---,,,,,,,,,,,,,,,,,,,...~:,,,,,,,,,,,,,,,....,,...,...,....,,,,,,,-,--:!:;;;:;::~~..,,,,,,,,,,,,--------,,,,
,,,,,,,-------,,,,,,,,,,,,,,,,,,,,,,.-*:-------,------,,,--,,,,,,...,,,,---------!:          ,,,,,,----------------,,,,,
,,,,,,--                                                                                                         ,,,,,,,
,,,,,,-#                                                                                                         :,,,,,,
,,,,,,$*                                                                                                         !,,,,,-
,,,,,,~@                                                                                                         !,,,,,,
,,,,,,,=                                                                                                         !------
,,-----$                                                                                                         *------
------~=                                                                                                         *------
------~=                                                                                                         !------
-------=                                                                                                         -------
-------=                                                                                                         :------
-------:                                                                                                         :------
--------                                                                                                         -------
---------------------------------,,,,,,,,,,,,,--,-----,--,,,,,,,,,--,,,,,,,,,,,,,,,,,~:-,,,,----------------------------
)";
    MoveCursor::getInstance()->GotoXY(25, 60); std::cout << "호구잡히는 자신을 바꾸고 싶었던 버터는" << std::endl;
    Sleep(1000);
    MoveCursor::getInstance()->GotoXY(25, 61); std::cout << "더이상 호구잡히지 않겠다는 다짐을 하고" << std::endl;
    Sleep(1000);
    MoveCursor::getInstance()->GotoXY(25, 62); std::cout << "천구들에게 멋진 버터의 모습을 보여주려고 한다." << std::endl;
    Sleep(1000);
    MoveCursor::getInstance()->GotoXY(25, 63); std::cout << "버터는 훈련을 하기에 앞서 도와줄 사람을 찾고 있었는데" << std::endl;
    Sleep(1000);
    MoveCursor::getInstance()->GotoXY(25, 64); std::cout << "딱따구리한테 쪼이고 있는 나무정령을 보게 되었다." << std::endl;
    Sleep(1000);
    MoveCursor::getInstance()->GotoXY(25, 65); std::cout << "괴롭힘 당하고 있는줄 알고 도와주러간 버터는 오히려 딱따구리가 쪼고 있는것을 좋아하는" << std::endl;
    Sleep(1000);
    MoveCursor::getInstance()->GotoXY(25, 66); std::cout << "나무 정령이었고 나무정령은 무보수봉사를 좋아하는 특이한 취향을 가진 친구였다." << std::endl;
    Sleep(1000);
    MoveCursor::getInstance()->GotoXY(25, 67); std::cout << "버터의 자초지종을 듣게된 나무정령 빅우드는 버터를 도와주기로 하는데..." << std::endl;
    Sleep(2000);
}

void GameManager::LoseEndingScene()
{
    system("mode con: cols=150 lines=150");
    system("cls");
    std::cout << R"(
~~~~~~~~~~~;;:!~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~:!~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~:;~~:;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*!;:~~~~~~~~~~~~~~~~~~~
~~~~~~:*;*~~~~~:!;~:;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~!~~~!~~~~~~~~~~~~~~~~~~
~~~~~:!-~~:;~:!:~~~~:-~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*~~~~!~*~~~-!;~~~~~~~~~
~~~~~:;~~~~~:;~~~~~~;-~~~~~~~~~~~~~~~~~~~~~~~-. .::~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~:;~!:~~;::;!;~~~~~~
~~~~~~!~~~~;~~~;~~~::~~~~~~~~~~~~~~~~~~~~~~~- -.-;;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~:;~~~!~;~~:;!:~~~
~~~~~-;~~;!~::~:!~~;-~~~~~~~~~~~~~~~~~~~~~~- ;! :;:~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~:~~!~~;~~:~:!*;~
~~~~~~~!~:~:;~:~:~!~~~~~~~~~~~~~~~~~~~~~~~~ ~!- :;:-~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~:!~;:~-;;;~:~~
~~~~~~~~;~~:~~;-~;:~~~~~~~~~~~~~~~~~~~~~~-~ *--,.;;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~;;~~!~:!;:~:;~~
~~~~~~~!:;~~;;~:;~~:~~~~~~~~~~~~~~~~~~~~~~~ *.,!,.:;:~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~:;:~~~
~~~~~~~-~:;:~~;:-~~;~~~~~~~~~~~~~~~~~~~~~~~ !-.:!- ,--,,--~~~~--~~~~~~~~~~~~~~~~~~~~~~~~~~~!;~;~:-~~
~~~~~~:~~~~~;!~~~~-!~~~~~~~~~~~~~~~~~~~~--- -;,.,!*:......    ~::~~~~~~~~~~~~~~~~~~~~~~~~-:;~;!~-~~~
~~~~~~;~~:!;~!~~~-:!~~~~~~~-~~-~~~~~---   ,!!**;,.::!;!!!!**;!~    ;;:~~~-~~~~~~~~~~~~~~~~~;!~~~~~~~
~~~~~~~~~~~-~~~;!!!~~~~~~~~     ..:~   :;!!;-,,,...........,,-:*!;-  ~;:,      ,;:~~~~~~~~~~~~~~~~~~
~~~~~~~~~~:;-~;~~~-~~~~~-. -~;!;;:  ~;;:-............~~:~........-~!;,. ~:!!;!:~ -;:~~~~~~~~~~~~~~~~
~~~~~~~~~~~;;!~~~~~~~~~, -!;:~-~:!;!;,~:;~.........-!;~~~:..........-;::!~~,..:!!, :;:~~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~, -!,.....~!;,.;: .;:,..,,.,:;.    :,...........-!........~*- :;:~~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~-~- ;;......*!...-:    :;,:*;:;-      !!;,.........~-.........,!- ;;:~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~, ;:.....~*~..-;*.     .;~           ;:~!!:.......,,..........,!~.;;~~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~, ::.....:;,.,:~:-       ;.           ;~. ,:!~..................-*,,;;~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~, ~:....,!;,.~:-,;        ; ..         ;::;:-~;;-.................:; ;;:~~~~~~~~~~
~~~~~~~~~~~~~~~~~~ -; ...~;-.,:;;;!~       :~;;::.       !,.-;;;:;!,........   ......!- ;;~~~~~~~~~~
~~~~~~~~~~~~~~~~~ .*. ..~!,.~!;;:.:,     :::.,..,;:     .!,....,;;!!-......    ......-; :;:~~~~~~~~~
~~~~~~~~~~~~~~~~- *-  .;*,..;:,...:-   ~;~,.......~:    -;.......,~!;,......    ......!,-..:::~~~~~~
~~-~~~~~~~~~~~~- !~  .:!....,.....~!:;;~,.....,....~;;~~;,..........-,......    ......-* :- ;;:~~~~~
~:~~~~~~~~~~~~~.,!.  ~!.   ........-:-...,,,,,,,,,,,,-:~-..........-.,.,.....  ....~;:-!!;;~.;;~~~~~
:!!~~~~~~~~~~~- !,..-!     .. ........,,,,,,,-------,,,,,..........~.~.-...........!::;;*-,* :;:~~~~
!!!~~~~~~~~~~~ ;;...!,     .   ....,,,------------------,,,........~.-.~...........;,  ,*~ :! ;;:~~~
~:~~~~~~~~~~~.,!,..::     ... ...,,~:------------------;:-,,,......~.:.-..,........::      .!.~;:~~~
~~~~~~~~~-~~, !~..,!.    .......,,-;!--------------~--:;!---,,....,~.~.~..,,........!     . :--;;~~~
~------~~~~- ;:...:~.  ........,,-:!;--::----------:;-;:!:---,,,...,.~.,..,~........:~   -;: ! ;;:~~
----~----~~ :!....;,..........,---!!;-~~~----------::;!,-!~----,.....-.....~........,!   ~:*!*.:;;~~
~--~~-----,.*,...~~..........,---;;~*:~:------------;~!:,~!;----,.....-....:.........~~  ~~:!, ;;:~~
--~-------.*~....!,.........,--~;;,:!!:-------------~:!;,,-!!:---,...-~....:.........,!, ~~.!--;;~~~
--------~.-!-...~~..........-~;!~,,,-!--~----------;:-::...,~!!!!~,..--....:..........-;~~..-; ~;;~~
~------~~ :-,..,!..........~;;~,,,..,;::!!::~------;!!!!-...,,,-;;,..:,....:............~,...!-,;;~~
;~~-~---- *--..:~......,,..~-,,,.....,:;:-;;;!;!!!!!:,--........:;,.,:.....~................,~* :;:~
;~---~--~ !--.~!.......:-.,!,............,,,,,,--,,,,...........~;-.;-.....~,...............,-!~.;;~
---~---~-.~;--*-.......-;.-!~.........,............,---.........~;~;;-.....-~...............--;:.;;~
----~-~~~- ;!*~.........:;--;.......,,~.............-,.........,*!;::-.....,:..............,--:!.;;~
-~--~-~~-- .;;..........,!;;!~....-~!!!.............;!!!:~~-,...--..;~.....,:..............---:;.;;~
-~--~--~~ ,*!............;,~,..,!!!;!!!.            :;;;;!;;;!-. ...-~......-:...........,----;~.;;~
---~~--~~.!~...:;.......,!....~~;;;!;                 .~:~!;!;  ... ;~......,;,.........,-----!-~;;~
-------~- :*;!!*;.....;;;,,--,;!:~.                        .-~,  --~-~........;-,....,,------;: ;;:~
---~--~--,. ,.-!....-!-  -.   .,.                          .-.     .;:........-!:-----------:*.-;;~~
~~-----,----, !~...-!,  -.      ~              .           -.       :~.........,:!;~------~!!.,;;~-~
----,,,---,, :;....:-   -.     ,-            ,;!;:         .~. .  ,-:-..........-~~;!!!!!;*- -;:-,,-
,,---,--,,,, !~...,;     ~~-:-~-         ::;;;:::;!         .-~-:~, ;-..........-:--------:;.;;-,,,,
-,,,,,,,,,,. !-,..:~         .          ;::-.    .~-                !-.........--;--------~; :;~,,,,
,,,,,,,,,,, ;;-,..;,                   .;. ,~~--   :               ,!.........,--~:--------! :;;,,,,
,,,,,,,,,,. !~---,~:                    :,~:  .-:;;;            ..,!~~~~~~~~--~~-~!--------~!.;;-,,,
,,,,,,,,, ..;:::;:;;,,...               ,,.             .,-~;;!:~:~!~-..       .:~!--------~* :;:,,,
,,,,,,,, .*;,        ..-;!;;~-.                    ~;!!*!~.                   .,:!;---------*.-;;,,,
,,,,,,, -!!;;::,            ...:;:~,          ~:;!~,.                .,~:;;!;!!!;;;;--------~; ;;~,,
,,,,,,, !;::;;;!!!:~-.            ,-~;~,   -;:,,             .-,-:;!;!!;;;;::::::::;---------!.-;;,,
,,,,,,, *;:::::::;!;!!!;;~,-           -~:,,         .,--~;!;!!!;;:;:::::::::~~~:::!---------;~.;;-,
,,,,,,, *;~~~~~~~:::::::;!;!!;~.                ..:!;;!!;;::::::::::::~:~~~~~~~~~::!----------! ;;:,
,,,,,,, *;:::::::~~~~~~:::::::;*=!*:!;~~::~ --!!*!;:::::::::::~~~~~~~~~~~~::::::~::!----------::.;;-
,,,,,,, !;:~:::::::::::~~~~~~::::::;;;*!**!;;;::::::::~~~~~~~~~:::::::::::::::::~::!~---------~* ;;;
,,,,,,, ;!~::::::::::::::::~~~~~::::::::::::::~~~~~~~~~~~:::::::::::::::::::::::~::!~----------;; ;;
,,,,,,, ;!:~::::::::::::::::::::~:~~~~~~~~~~~~~~~:::::::::::::::::::::::::::::::~::!~----------~* :;
,,,,,,, ~*:~::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::~::!~-----------:~ ;
,,,,,,,. *;;::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::~::!~------------!.~
,,,,,, .:**!*;::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::~!!*!!-----------;!.
,,,,, ,!~.  !;:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::;!:, ,~!;----------*.
,,,,..*-   .*;:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::*:     .!~---------;~
,,,, :;    ;*::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::!!.     ;!----------*
,,,.-!      !;:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::;!~      :~---------!
,,, ~:      .!:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::!:       :~---------~
,,, ~~     .~!:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::!;,      ::----------

)" << std::endl;
    MoveCursor::getInstance()->GotoXY(25, 60); std::cout << "Ending: 너무 열심히 했어!" << std::endl;
    MoveCursor::getInstance()->GotoXY(25, 61); std::cout << "버터는 빅우드와 훈련을 너무 많이 한 나머지" << std::endl;
    MoveCursor::getInstance()->GotoXY(25, 62); std::cout << "훈련 도중 깊은 잠에 빠지고 말았고 " << std::endl;
    MoveCursor::getInstance()->GotoXY(25, 63); std::cout << "다음날 버터는 놀러가지 못하고" << std::endl;
    MoveCursor::getInstance()->GotoXY(25, 64); std::cout << "쬰장님의 집에서 책을 읽게 되었습니다." << std::endl;
}

void GameManager::VictoryEndingScene()
{
    system("mode con: cols=150 lines=150");
    system("cls");
    std::cout << R"(
~~~-~-.                                                          ... ...........                                     ...
----~~.                                                          .     ...-,..                                          
-----~.                                                           ,:;!!;-  .;:.                                         
-----~-                                                          ,:-..,-:;:,.,:~..     ...  ...                         
-----~-                                            ..          ..!-......,-::-.-:-    .       ...                       
------~.     ...                    .   ....    .        .       !,....-!*!!;!! -;~ ..          ..                      
------~,.   .-~~,.                      ...,.. ..-~:;;;;:::::::;;;;-,..;-  ..,~-.:;,.             .....                 
--~---~-.   -:~~~,             ..   -:;;!;;;:,:;;~-,,--,....,,,,,,,--,.!:-. .~-. ::,                   ..               
--~~--~~.  .~~--~-            .  .~!!!;~--~;*!~,....:::~...............~;!!:, -:-                        .              
--~~~~~~, .~~---~~.            .:!:-. ..,~::-......:,  -:......,,.........-~;;~.,:-.                      .             
--~~~~~~- ,~~----~-           .;!,   ..-;;-...,~:;~,    ~~...,~::::~.........-;;- ,:~                     .             
---~~~~~~,~~-----~~  ........~!~    .,:;-..,~;::~;:      ~~~-:-.  .~:..........-;;..:~.     ..            .             
---~~~~~~~~~------~..       -!~     -;:,.,:;;:~-,:.     -~....     .;...........,~;- ... .....--.        .              
~--~~~~~::~~------~.        !~..  .:!-..-!;;:::;;;     ~:~~;:.     -;~............,;!  ,!!**!, -;~....                  
----~~-~~:--------~,       ~;,....~;,..,-,..,...-;   ,;~,...~,     :-,~~,..........,;:~;-,.,-::,.~:,                    
~~~~~~-~~:~-------~~       ;~....~~,...,...-,...-;--:~,.....-~    -:   ,~~...........-:.......,-:.,:~.                  
~~~~~~~~~:~--------~.      !,...-:...  ...,,.....~:~,........;.  ,;~:-.  ,:,.........,~........ ,!-.::,                 
~~~~~~~~~~:~-------~,     .;...~;,..    ..~,,,.,,,,,,,,,,....~~.-;-,-~::-,,~-..................  .~:.-:-               ,
~~~~~~~~~~:~--------~      ::~::,..    ..~~--~,,,,,,-,,,,,,,.,::;-.....,-;:-;-.................    ~!,-;~              ;
~~~~~~~~~~:~--------~,   .,;*;-.....  ...:~-~~--,,,,,,,---,,,,-:-.........-:::,................     -;,,;~.           ,:
~~~~~~~~~~:~~-------~- ~;!:~-............:-----,,,,,,,,,,,,,,,,--,,........,-;:.................     -;-.::.          :,
~~~~~~~~~~~:~--------~ :~...............-;-----,,,,,,,,,,,,,,,-:~-~-.........-!-....   .........     .,;-,;:,....    .:.
~~~~~~~~~~~:~--------~.-!-,............,~;--------,,,,,,,,,,,,-;:~~~~.........,~...     ..........   ..-:-.:~    .   ;--
~~~~~~~~~~~::----------.,;;,..........,:;;-,,,-~-,,,,,,,,,,,,,,;;---~,.............     ................,:-,:~    ..-;,~
~~~~~~~~~~~~:~--------~, !~..........,!;,~~,,-;!:-,,,,,,,,,,,,,;!-,,-,........  ...      .................!-~;-    .;--~
~~~~~~~~~~~~:~---------.;;,.......,~;;~. .:~,~;,~:--,,,,,--,,,,::;-,--,.......  ...       ................-;.:;.   ,:,::
~~~~~~~~~~~~::~----~--.-*,........-;..    ,;:;~..:;;~--,,---,,,~--;----,.....    ..       .................~;.::   ;-~~;
~~~~~~~~~~~~~::~--, ,: :~......~,.~:        -~. ..-:;;;;;;;:;~-~; :;---,,.....   ...     ..................,!-,;~ -:,::~
~~~~~~~~~~~~~~:~-,.-,..;.......~:,~~.-::~~, .      .,---~~-.-:;;:..-;:~--.....  ....     ..,................~!.::-!,:~:.
~~~~~~~~~~~~~~~~-,-!!!-:......-~;;:.;;;;!!!:,.         ..    ....  ..-;!;:,...........  ...,,................!~~;!,-~~~.
~~~~~~~~~~~~~~:~-,-!,!!~-,..-:~-., ~:~-,,~;!:.                        .,-:,................,,................~: ;:.~~~, 
~~~~~~~~~~~:::~~-,-! -;;:::~~.     -.     .:;,           .--~~~,        .;..................,,...............,; :::~:.  
~~~~~~~~~:;::~~-.  !,     .;                ;-          -:!!!;;;~.      -:..................,-,..............,; ~::~-   
~~~~~~~~~~~~::~.-;*!:-,   -~                ..         .:;~~~~:;;;-    .:,...................~,,.............,;.~:~:.   
~~~~~~~~~~~~~~.~*:,,!~-:. ~-                           ,:,     ,;;:.   :~,~~.................,-,,............,;.-;:.    
~~~~~~~~~~~~~.-!,   :  -; .;                                    .:;,  -;;!;,................,-:-,,,.........,-! :;-.....
~~~~~~~~~~~-. :-   .:;  ;~~:                    .                -:.   .,;,.......,.......,,,--:~-,,,....,,,-;~.;:~:~::;
~~~~~~~~~,..:!!.  -!!~  .!-                  , -::-,-,            .    .~-.......-.......,,,,,--;:---,,,,,,-;;.::~~~~::~
~~~~~--...,;~.:.,,;:;.   :.                  ,~~-~~:::.                ,:........-,..,,,,,-,,,,--:;:~----~:!;,,;-.....--
:::-..-:!!!-  ,~:--,;    --                   .~--~-~:~                ~-.......,-,,,,,,,,,,,,,,,-~:!!;;!!;-.~:-.  ....~
:~  :**!~~,   .;:  ,;    .~                   .:~-   .~               .;........----,,,,,,,,,,,,,,,,~!--   -:-!!!;;:;;;;
..~!;~, .~    ,,:~-,:     ~,                  .:.     :               ,~........--,,,----,,,,,,,,,,,~;.,-~-,,   !~:     
~;~,    .-   .:~...-;.    ,:.                  ~     ,:               ~,.......,~,,-,::;~,,,,,,,,,,,~;.::,.,,,, !~;     
!~      .~  -::.    ;-     :~                  ~,   .~                ;........,~~!:;:.;~,,,,,,,,,,,~:.:~,.,,,..!~;     
~        ~::~,~    ,;-      ~-                 .:---:,               ,:........-~;---. ;;~,,,,,,,,,,~:.::,,,,,. !~;  .  
          .. .~   ~~::.      :~.                 ,,,.                -~........-:;.    -,;-,,,,,,,,,~;.;~,,,,,. !~;     
             .~.,:;,-!,       ~:,                                    --........-;:       :~,,,,,,,,,~;.;:,,,,,. !~;     
              ::~,  -~:,       .~:-                                  --......,~:-       ,;-,,,,,,,,,~;,;~,,,,,. !~;..,..
                    ---:.        .:;~.                               -~....,:;.         -!:-,,,,,,,-~;.::,,,,,. !~;;;;;;
                    ~-.~:.         ,;;:-..                           ,;,,-~:-            ::,,,,,,,,-~!.::,,,,,, !:!-----
                    -~..:~.         ~,-~;;:~-,                        :::~,             .:~,,,,,,,,,~;.::------ !;!::::;
                    -~...~!,       ,~ ....-;!!!;::,.               .-;!-.              .;:-,,,,,,,,,-;,::-,,-,, ;!;!!!!!
                    -~....~;-.     ~-  ...,;:::~--:;!;!;;;;;;;;:;;;:~,.              .-;:-,,,,,,,,,,-;,;:,.....     ..  
                    ~-.....,:;.    ;.   ..~;::~    -;;;;;---,,,,,,-                 ,:;~-,,,,,,,,,,,-!,:;-........,,,,..
,                   :,.......:;-. ,;    .,~;;:      :---~,-,......~               .,;;-,--,,,,,,,,,,,;,:;-......,,-,....
:                  .;,........,~:~::     ,,~::.    ,~..,,,-,...   ~              .~:~:-,,,,,,,,,,,,,,;--;-..,,--,,......
;                  --..........,-:;~     -.~::~.  .~,..-,.-.      ~           ..~::..:~-,,,,,,,,,,,,,:-,;~,--,..........
!,                 :~...........,-;    ,:;,-::-~~:::.. -  -       :.        .,:;:,...,;~-,,,,,,,,,,,,:: ;:,.............
;~               .:;~...........,-;   -~,-::::, ....--,-  -       :.      ,~:;~,......-;:-,,,,,,,,,,,~; :;..............
.!,             .;:,;...........,-;- ,:-  ,!;:-      -;;:~-       ~. ...~;!;-..........,!!-,,,,,,,,,,-* :;..............
 ,!:,..       .-!~. !-..........~--::;~    .:::  .,~-,..,;:       ---~;;::~:-...........-;:~,,,,,,,,,-! -;,.............
. .-;!!;;::~-:;~,,: ~:..........--,,~;.     ~:;---..     ;;.      ,;~~~--,,-:~...........,~;~,,,,,,,,-;~,;~.............
...   ~!;!!;!!~ ~;-.-*~..~:......~-,~~      ,:::.        ;-       ,:,,,,,,,,-::...~,.......-;:-,,,,,,,;!.:;.............
......  .   . -~~,.. :;-.:::-....-~,:,      ,:~-        ,:-~-:~::~;~,,,,,,,,,-~:-.~:~~----~:--,,,,,,,,~*,-;-............
..............,,..... ~!::--~::::~--:,     -~:~~        ~~-;:~~----,,,,,,,,,,,-~;:-~-::::::-,,,,,,,,,,-!:.;~,,,.........
...................... ~!!~,,,,,-,,,:,  .,:~,~~:,       :-,!:--,,,,,,,,,,,,,,,,,,~:~-,,,,,,,,,,,,,,,,,-~!,-:~------,,...
,...................... .~:,,,,,,,,-;:-~~--..,:~~.     .:.,::,,,,,,,,,,,,,,,,,,,,,,--,,,,,,,,,,,,,,,,,-,:;.-;~...,,,,,,,
,,,......................,!,-,,,,,-;~        .;~-:,    ,~..;~,,,,,,,,,,,,,,,,,,,,,,,,,,~-,,,,,,,,,,,,,,,-;! ~;-.........
..........................;~,,,,,-:~          ::~.-:,..~,.,;-,,,,,,,,,,,,,,,,,,,,,,,----:~,,,,,,,,,,,,,,,~!: -:-........

)";
    MoveCursor::getInstance()->GotoXY(30, 60); std::cout << "Ending: 과자를 받아 행복한 버터!" << std::endl;
    MoveCursor::getInstance()->GotoXY(30, 61); std::cout << "훈련을 열심히 한 버터는 성장했지만" << std::endl;
    MoveCursor::getInstance()->GotoXY(30, 62); std::cout << "많이 피곤해 보여서 쬰장님은 기권을 해줬습니다." << std::endl;
    MoveCursor::getInstance()->GotoXY(30, 63); std::cout << "그리고 승리의 보상으로 과자를 얻게 되었습니다." << std::endl;
    MoveCursor::getInstance()->GotoXY(30, 64); std::cout << "훈련을 한 의미가 없어졌지만 버터는 행복했답니다!!" << std::endl;
}

void GameManager::MeetDiana()
{
    system("mode con: cols=150 lines=150");
    system("cls");
    std::cout << R"(
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~:~~~~~~~~~~~~~~~:~~~~~
~~~;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*:!!!!!!!!!!!!!!-.,!!!!!!!!!!!!;,,!*;:!!,,,~!!!;-,,,-~~~
~~;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*-*!!!!!!!!!!!!- -..!!!!!!;;:-. ,!-....~;.... :~.!!!:;~~
~;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*-*!!!!!!!!!!!-,-,; ;!!~-, -~~-~;------,,~:~::~.~.:.  -~
~!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!-!!!!!!!!!!!: ~  ~ :- .~*!~ ..,-------------.-;. -;  ,~
~!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*~;!!!!!!!;!!!-~,  : .-~:-.,,-:------~:~-------:,  ,;~ ,~
~!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!.!!!!!:    ,; !   ;~!,..----:~---:!!-.;;-----:~   ,!;-,~
~!!!!!!!!!!!!!!!!!!!!!!!!!::-   ...,,.,;!!!!!!!!!!!!!!!!!!!!!!!* *!!!:.~:~~-.-~~,-::.,----,,-,---;. . ~::::::;     *-*;~
~!!!!!!!!!!!!!!!!!!!!!!!;..:;;;;;;;;;!-.!!!!!!!!!!!!!!!!!!!!!!!;.*!!! ~.   .::-,;:,-----,..~ ,--;,   .  ,.. !-     *~;-~
~!!!!!!!!!!!!!!;:::::::-.-;~,.........:,-!!!!!!!!!!!!!!!!!!!!!!~;*!!; ~      ,.~-,-----, .,;;:~~;~..,,       ~     !-!-~
~!!!!!!!!!!!;,,. ..,,~~;:-,..........,,;,,,~!!!!!!!!!!!!!!!!!!!-!!!;.-:;,. ..-:-------, ,:;,.,-:-,:!;!.     .-.   .!-~;~
~!!!!!!!!!: ..!!!!;;;;;~......     -.   :~,.,!!!!!!!!!!!!!!!!!*-*!!,~;.-;!-.-;.------, .--.....~-.,~~~;:!:-..-    .;--~~
~!!!!!!;-.-::~-............        -    -!~! ;!!!!!!!!!!!!!!!!!-*!-,~..;,:~-;-------, ..~-,...,~~..~~~;:~~;:,     .;--~~
~!!!!!: .*:..............            .   *~;-:!!!!!!!!!!!!!!!!!~*;.:  .:,-!*--------,,,.;!;-,:;;,..,-~;~~:;,;.    .!--~~
~;!!~,-::-......  .                       ;,;-!!!!!!!!!!!!!!!*;:!-~~ .;,,-;~----:---~;*:..~::-.-...,~~;;!~..;;~.  .*--~~
~!!. !;,.....,                        .   --;.!!!!!!!!!!!!!!!*-;! !. ;;.,;;----::-~*;~;,  --..-~,...--::.   !~~!, .*~-~~
~~ ~;-......                  ,   .-, :    !~,:!!!!!!!!!!!!!!!.!;,- ,-; -!-----;~~-:!:-    --.:.~~-,,~~*    .~:-.  ;~;;~
:!!~....,                     ~    .; :    .!-.!!!!!!!!!!!!!!! !--,,~-~ ~~-----;~~,,~.      .:;- .,~;;*!.         .;:-:~
:!,.....                   -,.-;    !,:.    ;*.!!!!!!!!!!!!!!:-!.-,-~-,.;------;~~-:.          .         ,,,,      ;,,:~
~~....                  . ;!-!,,:   ! ~;    ,*.~!!!!!!!!!!!!!-;! ~,:,.-;~-----!:~~;-~:::,               -;!!;:,    -;;;~
:~..      .        ..- ..*!     ~,  ~-:;.    ;:-!!!!!!!!!!!!!,*! ~.;. -*-----~*~~;;!;;,                    -;!;~,.  :!;~
~~      ,~.       ,;-, .~ ~  ,:.,:-  ;.*,    ,! !!!!!!!!!!!!!-*!,--;,,:~-----~=~:!!;,          .            .~;;!:. ,!-~
:~      :     ,;  ;,   ., -.  .~ .* ,~,*      !.!!!!!!!!!!!!;-*!;-!!--;-----~~=;*!;   ...      , .     . ... .;;;.  -,-~
~*-         ,~ ~~ .;~:,.;  --  ~  .    ,      ,~.!!!!!!!!!!!;:!!!.!!--;;----~~*;:;,  .:;;-     ~.~-     ~:!:. .-.   ,:;~
:~;.        .!:.:, *.   ;.  ;-.!              .; !!!!!!!!!!*::!!!~-!:~:*-----~*:..   :;;:;    .~,-~    ,!!;!,         ;~
:~,~          *; ;.~.   ~!  ,!-.   . .~        ~,-!!!!!!!!!*-!!!!;,,;~:*---~~;!-    .!!!!!.    -,.,    ;!;;;:         ~~
:~ -:    ;  .;,;  !~-.~: *   ,    .,!:,; -  .~  *,;!!!!!!!!*,!!!!!; ;~:;~--;;,.     -!!!;;.           .;!;;;;        .;~
:-  :,   -- :~ ,*  ,~,            -::;.!~    ~  !.;!!;;!!!!;,!!;;!!~-;;!;-;~        ~!;!;;            .:;;;!;        ~;~
:-   :.   :;.  !:           ~.  - .. -~ -    . ..~-:,.:;;;!~:!;;;;;;.~!:;!,         -;;;::             :!;;;,       .;~~
:-   ,~    ;~.-;           ,!.  ,     :,,*     , :  -~.:;;;.!!;;!;;-.*~-;-    .     .;;::.    .        -:!!;        -~~~
:~    --    :*-             ~   *-    .:~-~      ~. .~:,.;!.!;;;!;,-;~-~:           .,.      ----.      .,-~   ...  ~-~~
~*-    :.    ;        :.   -;   !::  ,*  .;.     --.- ,;, ;,*;;;;,-!~--:-       .          ,:...,~::           ...  :-;~
:;:-   .~          ..;,--~  :.  --   ;- .;~       ;~~   ~;::!;;!-,;~~~~!.                   :......,,               :~!~
:-,~,   :,        ,,*!*-;   -.  ,~   ,=,:.-       !.~*,  -:;!;!~ *~~~~~*                    ;....~:,~             . :;~~
:-  ~-   ;.       ,:. ;~.~  -,   ;    ~:         ,:-  ;-.:-;;;;,::~~~~~!                    ~,.--.  .-              ~!-~
:-   -,  .~      :,  ~-~- . -: . ,          ,*,  ~     ;-!-!!;;.*~~~~~~*                     -~-     :               :-:
:;.   :,  :      !-,~:-~-;:,.:~~.       ~;, **! -~      ;!,!;;;-;-~~~~~*,                    ~-      .               .-:
:~~-   :, .;     .;!,~- :- ~   .       .=*: ;;.-*;      ~:-!;!;-:~~~~~~~~                    .~~,,,.,~                -~
::.~-   :. :,       ;;;---           ., ;!~ ...,!!,     ~,:!;;;.!~-~~~~-;.         .....        ..,-,                 -~
~:;:::  .:. :        ;. -.               ,;;!!!-..-,    ~.;;;;;-.;~~~~~-~!   .-~~~~~---~-~~~~~:~~~~:~~~~~-            ,~
~, ,!!;   ~ -.       !.                 .=====**.  -,   ;.*;;;;;,.!~~~~~~;;::~,    . . .    ......       -::.        .~~
~;;- ~;~. ,~.;       .                  ~=*!===!,   ~   :~!;;;;;;,;~~~;;:-.   ,----,,,,,                    --~,  .-~~~:
~;;;;.~!:  -.~~                         :====*=*.   :  .~;!;;;;;;-;~~*,    ,:;-                 -       .      -!!!,  :~
~;;;;: ~:-. - :      ~                  ~*!*=!=*    ;  --!;;;;;;;.!~~; .----.,,,,--,,,.          ,---,,--~-,-,   -~-.-:~
~;;;;;:.~;    ,.     -:                 ~=*****!    ~, ;-!;;;;;; -:~!-;:;:~~...     ..,-~:;;:,           ,::;-::.  .;.,~
~;;;;;;~ !::.  ,~:~~                    ,:***=-,.-  .: !-!;;;;:.,;:;:-         .,,,-~~~~-~-~-~,-,,.          .-~~:-, ~;~
~;;;;;;~:;~!~ .:.  ~  -                 - ,~;-  :-   ;,!~;;;;-.~;~;.        ,::,...            ...,~::-          ..., -:
~;;;;;; ;  :;~:.   -.                  -         .   *!-:;;:-.;:-~*.    ..~~,                         .~~-,..       - -:
~;;;;;~,~   ~-     -.                  .             !~.;;:.,;:~~~;~..-~..                                ...-~~.   - -:
~;;;;;.-,          -.                                ;: !: :!~~::!,,;~                                          .-, , -~
~;:,-;.;,          ,~                                *;.: ::~;:--,:,                                             ., ,.-~
~;.. ;.!            .:                               !~:-;:~:-    :.                                              , ,,~~
~~ : ;.;             ~.                              !-!;:~~:,     -.                                             ~ .,~~
~.,; -.;             ,~                              *,*!~~~:-      :                                             ~  ~~~
~:.::,.:.             ;                             .;~*~~~:;:       :.                                      .    -. ~;~
~; ~.,.,,             ~.                         ...,:~!~**;,,;.     ;~                                      ,.   .- :!~
~; ;,,~.~             ::,,,                     ,...~::*!,..., -~-,,-~,:                                      -    : ;*~
~;-.!-:-~~          .:-,,,-:                 ......~!-;!-~:;;;:- .... ,.~    .                                 -   ; ~*~
~;;.!.~: ;.        ~;      ~.              ......,;~;,!! ;;;;;;;;;;:;;;.-,   .                                 .,  --:*~
~;;.!~.~~.:       :,        ~           .......,::-.!.!!.;;;;;;;;;;;;;;: ~,  ,                                  .---, ~~
~;;- :~.;-,!     ~,         ,:       ........,:!. ~;~-;! :;;;;;;;;;;;;;~ .:,.,                                   :,   ~~
~;;;~,.~;;,.~-  -~      -    ,~, . ........-::-.-:;!,;::: -:;;;;;;;;;;;~.~-,,-~.                                ~,    ~~
~;;;;;;;;;;, ;: ;.    -;       :~.......,~*!. -;;;;;,!:-:;, ,;;;;;;;;;; -.    .-                                :  .  ~~
~:;;;;;;;;;;~.,:;    ~-         ~~...-~;::.,-;;;;;;;,!:;;;~ ~;;;;;;;;;; ~.   ,~,                                --~   -~
~~:;;;;;;;;;;:--;   ;.           ~~:!!,. ~:;;;;;;;;;~;. . .:;;;;;;;;;;; -.   .~-                                 :....~~
~~~:;;;;;;;;;;~,!..~~............,=:,,,:;;;;;;;;;;;;;!;;:;;;;;;;;;;;;;;.:~-----;---------------------------------;---~~~
~~~~~~~~~~~~~~~~:~~:~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~:~~~~~~~~~~~~~~~~~~~::::::::::::::::::::::::::::::::::::~:~~~~
)";
    MoveCursor::getInstance()->GotoXY(10, 55); std::cout << "피코라는 길을 걷다 스승님을 보고 반갑게 달려오려 했지만" << std::endl;
    MoveCursor::getInstance()->GotoXY(10, 56); std::cout << "피코라는 눈 앞에 투기가 넘치는 버터를 보자 버터가 남긴 전단지가 생각난 나머지 도망치고 말았다." << std::endl;
    MoveCursor::getInstance()->GotoXY(10, 57); std::cout << "피코라가 도망친 후 디오나는 버터에게 허리가 아프니 나중에 놀자며 과자를 주며 돌려보냈다." << std::endl;
    MoveCursor::getInstance()->GotoXY(10, 58); std::cout << "버터는 과자를 받자 빵긋 웃으며 감사합니다 쬰쟝님 이라는 말과 함께 집으로 돌아가버렸다." << std::endl;
}

//getter
int GameManager::GetCurGameStage()
{
    return curGameStage;
}

int GameManager::GetLastGameStage()
{
    return lastGameStage;
}

int GameManager::GetCurBattleStage()
{
    return curBattleStage;
}

int GameManager::GetLastBattleStage()
{
    return lastBattleStage;
}

//setter
void GameManager::SetCurGameStage()
{
    curGameStage++;
}

void GameManager::SetCurBattleStage()
{
    curBattleStage++;
}

//외부에서 선언하는 이유는 정적 멤버변수의 초기화, 메모리 관리를 위해서이다.
// 모든 인스턴스에서 접근이 가능한 만큼 변수를 초기화 할때 외부에서 한번만 수행해야한다.
// 내부에서 초기화하면 각 인스턴스마다 다른 값을 가지게 되어 싱글톤 패턴의 특성이 사라진다.
// 메모리 관리 -> 프로그램의 수명동안 하나만 존재해야하므로 외부에서 초기화해서 인스턴스 관리
// 이 패턴은 메모리를 효율적으로 사용하도록 도와준다.
// 초기화
GameManager* GameManager::instance = nullptr;

